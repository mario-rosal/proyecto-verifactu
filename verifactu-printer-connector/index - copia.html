<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Subir carpeta</title>
</head>
<body>
  <h1>Subir carpeta</h1>

  <form action="/upload" method="POST" enctype="multipart/form-data">
    <!-- El atributo clave es webkitdirectory (y multiple) -->
    <input 
      type="file" 
      id="carpeta" 
      name="files[]" 
      webkitdirectory 
      directory 
      multiple 
      required
    />
    <button type="submit">Subir</button>
  </form>

  <!-- (Opcional) Vista previa de lo seleccionado -->
  <ul id="lista"></ul>

  <script>
    const input = document.getElementById('carpeta');
    const lista = document.getElementById('lista');

    input.addEventListener('change', () => {
      lista.innerHTML = '';
      for (const file of input.files) {
        const li = document.createElement('li');
        // webkitRelativePath conserva la ruta relativa dentro de la carpeta elegida
        li.textContent = file.webkitRelativePath || file.name;
        lista.appendChild(li);
      }
    });
  </script>
</body>
</html>
